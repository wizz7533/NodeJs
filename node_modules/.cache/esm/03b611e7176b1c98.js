let express,helmet,path,favicon,nunjucks,routes;_176‍.w("express",[["default",["express"],function(v){express=v}]]);_176‍.w("helmet",[["default",["helmet"],function(v){helmet=v}]]);_176‍.w("path",[["default",["path"],function(v){path=v}]]);_176‍.w("serve-favicon",[["default",["favicon"],function(v){favicon=v}]]);_176‍.w("nunjucks",[["default",["nunjucks"],function(v){nunjucks=v}]]);_176‍.w("./routes.js",[["default",["routes"],function(v){routes=v}]]);









const app = express();
nunjucks.configure( path.join(__dirname, 'template'), {
  autoescape: true, // evite les injections xss
  express: app
});

// middleware ( use() )
//helmet va être un intermédiaire dans la
app.use(helmet());
app.use((req, res, next) => {
  console.log(`Request: ${req.url}`);
  next();
});
app.use( express.static(path.join(__dirname, 'public')));
app.use( favicon(path.join(__dirname, 'public', 'favicon-32x32.png')));

app.use(routes);

// app.get('/', (req, res) => {
//   // let html = `<h1>Accueil</h1>
//   // <img src="images/star.svg" width="25em" alt="logo star">`;
//   // res.send(html);

//   res.render('home/index.html');
// })

const port = process.env.PORT || 3200;
app.listen(port, 'localhost', () => {
  console.log(`Personal Node Server is listening on http://localhost:${port}`);
  console.log('Shutdown Node Server with CRTL + C');
})
